#!/bin/bash
currBranch=$(git symbolic-ref --short HEAD)
files=$(git diff HEAD  remotes/origin/$currBranch  --stat --name-only --diff-filter=ACMR -- 'src/*.js')

if test ${#files} -gt 0
    then
        clear && echo -e "\033[32m  \n ğŸ”  ğŸ”  ğŸ”  å¼€å§‹æ ¡éªŒjs... \033[0m"
        PASS=true

        for file in $files
            do
                ./node_modules/eslint/bin/eslint.js $file --cache
                if [[ "$?" == 1 ]]; then
                    PASS=false
                fi
            done

        if ! $PASS; then
            echo -e "\033[31m \n ğŸš«  ğŸš«  ğŸš«   eslintæ ¡éªŒä¸é€šè¿‡ \n  \033[0m"
            exit 1
        else
            echo -e "\033[32m \n âœ…  âœ…  âœ…   eslintæ ¡éªŒé€šè¿‡ \n    \033[0m"
        fi

    else
        echo -e "\033[32m   \n ğŸ””  ğŸ””  ğŸ””   æ²¡æœ‰jsæ–‡ä»¶éœ€è¦æ£€æŸ¥ \n   \033[0m"
fi

exit 0
