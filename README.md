
### è¿™ä¸ªæ˜¯å¹²å˜›çš„ï¼Ÿ
> åœ¨git pushé˜¶æ®µï¼Œå¯¹jsæ–‡ä»¶è¿›è¡Œæ ¡éªŒ

### ä¸ºä»€ä¹ˆä¸åœ¨commité˜¶æ®µè¿›è¡Œæ ¡éªŒï¼Ÿ
> gitæ˜¯åˆ†å¸ƒå¼çš„æ¦‚å¿µï¼Œæœ¬åœ°æ€ä¹ˆå¼€å‘æ˜¯ä¸ªäººçš„è‡ªç”±ï¼Œæˆ‘ä¸å¸Œæœ›åœ¨æœ¬åœ°å¼€å‘é˜¶æ®µå»ç ´åå¤§å®¶åŸæœ‰çš„å¼€å‘ä¹ æƒ¯ï¼Œå› æ­¤åªåœ¨pushé˜¶æ®µè¿›è¡Œä»£ç æ ¡éªŒ

### gité’©å­æ˜¯ä»€ä¹ˆï¼Ÿ
>gitèƒ½åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬ï¼Œè¿™äº›æˆ‘ä»¬ç§°ä¹‹ä¸º`é’©å­`ï¼Œå¦‚æœè¯¥é’©å­ä»¥éé›¶å€¼é€€å‡ºï¼Œgit å°†æ”¾å¼ƒæ­¤æ¬¡æäº¤ï¼Œé’©å­éƒ½è¢«å­˜å‚¨åœ¨gitç›®å½•ä¸‹çš„ hooks å­ç›®å½•ä¸­ï¼Œè¿™äº›ç¤ºä¾‹çš„åå­—éƒ½æ˜¯ä»¥ `.sample` ç»“å°¾ï¼Œå¦‚æœä½ æƒ³å¯ç”¨å®ƒä»¬ï¼Œå¾—å…ˆç§»é™¤è¿™ä¸ªåç¼€ã€‚

### æ ¡éªŒçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ
> git pushæ—¶ï¼ŒæŠŠå½“å‰åˆ†æ”¯ å’Œ è¿œç«¯å…³è”åˆ†æ”¯è¿›è¡Œå¯¹æ¯”ï¼Œæ‹¿åˆ°æœ‰æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ï¼ˆå‰”é™¤åˆ é™¤æ›´æ”¹æ“ä½œï¼‰ï¼Œç„¶åå¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒé€šè¿‡è¿”å›0ï¼Œå¦åˆ™è¿”å›1ã€‚

### è¿™ç§æ ¡éªŒæ–¹å¼æœ‰ç¼ºé™·ä¹ˆï¼Ÿ
> æœ‰çš„ã€‚è‹¥å½“å‰æœ¬åœ°åˆ†æ”¯æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„è¿œç¨‹å…³è”åˆ†æ”¯ï¼Œåˆ™è¿™ä¸ªæ—¶å€™è·å–åˆ°çš„æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œå› æ­¤è¿”å›å€¼æ˜¯0

### æ€ä¹ˆè§£å†³è¿™ä¸ªç¼ºé™·ï¼Ÿ
> ç›®å‰æƒ³åˆ°çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š
1. æœ¬åœ°åˆ›å»ºåˆ†æ”¯åï¼Œç«‹é©¬æŠŠç©ºåˆ†æ”¯ä¸è¿œç«¯åˆ†æ”¯å…³è”ï¼›
2. commité˜¶æ®µåšä¸€ä¸ªåˆ¤æ–­ï¼ˆå½“å‰æœ¬åœ°åˆ†æ”¯ æ˜¯å¦æœ‰ ä¸ä¹‹å¯¹åº”çš„è¿œç¨‹å…³è”åˆ†æ”¯ï¼‰ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸­æ–­commitã€‚


### æ€ä¹ˆç”¨å‰ç«¯çš„å§¿åŠ¿æ¥å®ç°ï¼Ÿ
```
// husky ç”¨äºè®¾ç½®æœ¬åœ°çš„ git é’©å­
npm install --save-dev eslint husky

// ä¹‹ååœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºbinæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«å†™2ä¸ªshellè„šæœ¬ï¼Œ
// éœ€è¦èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œå½¢å¦‚ chmod 755 ./bin/js-lint
```


**package.json**
```
{
    ...
    "husky": {
        "hooks": {
            "pre-commit": "./bin/heck-branch",
            "pre-push": "./bin/js-lint"
        }
    }
}
```

**./bin/heck-branch**
```
#!/bin/bash
currBranch=$(git branch -vv | grep  $(git symbolic-ref --short HEAD) | grep origin)

if test ${#currBranch} -eq $[0]; then
    echo -e "\033[31m \n ğŸš«  ğŸš«  ğŸš«   å½“å‰åˆ†æ”¯æ²¡æœ‰å…³è”è¿œç¨‹åˆ†æ”¯ï¼Œè¯·å…ˆæŠŠå½“å‰åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ï¼ \n  \033[0m"
    echo -e "\033[32m \n âœ…  âœ…  âœ…   å¯ä½¿ç”¨ git push --set-upstream origin ä½ å½“å‰çš„åˆ†æ”¯å æ¥å…³è”åˆ°è¿œç¨‹åˆ†æ”¯\n    \033[0m"
    exit 1;
else
    exit 0;
fi
```

**./bin/js-lint**
```
#!/bin/bash
currBranch=$(git symbolic-ref --short HEAD)
files=$(git diff HEAD  remotes/origin/$currBranch  --stat --name-only --diff-filter=ACMR -- 'src/*.js')

if test ${#files} -gt 0
    then
        clear && echo -e "\033[32m  \n ğŸ”  ğŸ”  ğŸ”  å¼€å§‹æ ¡éªŒjs... \033[0m"
        PASS=true

        for file in $files
            do
                ./node_modules/eslint/bin/eslint.js $file --cache
                if [[ "$?" == 1 ]]; then
                    PASS=false
                fi
            done

        if ! $PASS; then
            echo -e "\033[31m \n ğŸš«  ğŸš«  ğŸš«   eslintæ ¡éªŒä¸é€šè¿‡ \n  \033[0m"
            exit 1
        else
            echo -e "\033[32m \n âœ…  âœ…  âœ…   eslintæ ¡éªŒé€šè¿‡ \n    \033[0m"
        fi

    else
        echo -e "\033[32m   \n ğŸ””  ğŸ””  ğŸ””   æ²¡æœ‰jsæ–‡ä»¶éœ€è¦æ£€æŸ¥ \n   \033[0m"
fi

exit 0

```
